<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>iCloud - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions how to use iCloud to track devices in Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://home-assistant.io/components/device_tracker.icloud/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="iCloud">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://home-assistant.io/components/device_tracker.icloud/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions how to use iCloud to track devices in Home Assistant.">
    <meta property="og:image" content="https://home-assistant.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="iCloud">
    <meta name="twitter:description" content="Instructions how to use iCloud to track devices in Home Assistant.">
    <meta name="twitter:image" content="https://home-assistant.io/images/default-social.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <img width='40' src='/demo/favicon-192x192.png'>
    <span>Home Assistant</span>
  </a>
</div>

<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  
  <li><a href="/getting-started/">Getting started</a></li>
  <li><a href="/components/">Components</a></li>
  <li><a href="/ecosystem/">Ecosystem</a></li>
  <li><a href="/cookbook/">Examples</a></li>
  <li><a href="/developers/">Developers</a></li>
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/help/">Need help?</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="page">
  
  

  
  <header>
    <h1 class="title indent">
      iCloud
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code class="highlighter-rouge">icloud</code> platform allows you to detect presence using the <a href="https://www.icloud.com/">iCloud</a> service. iCloud allows users to track their location on iOS devices.</p>

<p>It does require that your device is registered with “Find My iPhone”.</p>

<p>To integrate iCloud in Home Assistant, add the following section to your <code class="highlighter-rouge">configuration.yaml</code> file:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="c1"># Example configuration.yaml entry</span>
<span class="s">device_tracker</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">platform</span><span class="pi">:</span> <span class="s">icloud</span>
    <span class="s">username</span><span class="pi">:</span> <span class="s">USERNAME</span>
    <span class="s">password</span><span class="pi">:</span> <span class="s">PASSWORD</span>
    <span class="s">account_name</span><span class="pi">:</span> <span class="s">accountname</span>
</code></pre>
</div>

<p>Configuration variables:</p>

<ul>
  <li><strong>username</strong> (<em>Required</em>): The username for the iCloud account.</li>
  <li><strong>password</strong> (<em>Required</em>): The password for your given username.</li>
  <li><strong>account_name</strong> (<em>Optional</em>): The friendly name for the account_name. If this isn’t given, it will use the account_name of the username (so the part before the <code class="highlighter-rouge">@</code> in the email address).</li>
</ul>

<p class="note warning">
This may cause battery drainage as it wakes up your device to get the current location.
</p>

<p class="note warning">
You may receive an email from Apple stating that someone has logged into your account.
</p>

<p>To disable the drainage of the battery, a dynamic interval is being used for each individual device instead of a fixed interval for all devices linked to one account. The dynamic interval is based on the current zone of a device, the distance towards home and the battery level of the device.</p>

<p>2 Steps Authentication is enabled for iCloud. The component will ask which device you want to use as Trusted Device and then you can enter the code that has been sent to that device. The duration of this authentication is determined by Apple, but is now at 2 months, so you will only need to verify your account each two months, even after restarting Home Assistant.
2 Factor Authentication is the improved version of 2 Steps Authentication, this is still not supported by the pyicloud library. Therefore it’s not possible to use it with the device_tracker yet.</p>

<p>4 services are available for this component:</p>
<ul>
  <li><strong>icloud_update</strong>: This service can be used to ask for an update of a certain iDevice. The <code class="highlighter-rouge">account_name</code> and <code class="highlighter-rouge">device_name</code> are optional.</li>
  <li><strong>icloud_lost_iphone</strong>: This service will play the Lost iPhone sound on a certain iDevice. The <code class="highlighter-rouge">account_name</code> and <code class="highlighter-rouge">device_name</code> are optional.</li>
  <li><strong>icloud_set_interval</strong>: This service will change the dynamic interval of an iDevice. The <code class="highlighter-rouge">account_name</code> and <code class="highlighter-rouge">device_name</code> are optional. If <code class="highlighter-rouge">interval</code> is used in the service_data, the iDevice will be updated with that new interval. That interval will be fixed until the iDevice changes zone or if this service is called again. If <code class="highlighter-rouge">interval</code> isn’t used in the service_data, the interval for that iDevice will revert back to it’s default dynamic interval based on it’s current zone, it’s distance towards home and it’s battery level.</li>
  <li><strong>icloud_reset_account</strong>: This service can be used to reset an iCloud account. This is helpful when not all devices are being found by the component or if you have added a new iDevice to your account. The <code class="highlighter-rouge">account_name</code> is optional.</li>
</ul>


</article>


        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">
  <div class='edit-github'><a href='https://github.com/home-assistant/home-assistant.github.io/tree/current/source/_components/device_tracker.icloud.markdown'>Edit this page on GitHub</a></div>
  <div class='brand-logo-container section'>
      <img src='/images/supported_brands/icloud.png' />
  </div>
    <div class='section'>
    Introduced in release: 0.10
    </div>
    <div class='section'>
      This is a platform for
      <a href='/components/device_tracker/'>the Device Tracker component</a>.
    </div>
    <div class='section'>
    <h1 class="title delta">Category Presence Detection</h1>
    <ul class='divided'>
        <li>
            <a href='/components/device_tracker.asuswrt/'>ASUSWRT</a>
        </li>
        <li>
            <a href='/components/device_tracker.actiontec/'>Actiontec</a>
        </li>
        <li>
            <a href='/components/device_tracker.aruba/'>Aruba</a>
        </li>
        <li>
            <a href='/components/device_tracker.automatic/'>Automatic</a>
        </li>
        <li>
            <a href='/components/device_tracker.bt_home_hub_5/'>BT Home Hub 5</a>
        </li>
        <li>
            <a href='/components/device_tracker.bbox/'>Bbox</a>
        </li>
        <li>
            <a href='/components/device_tracker.bluetooth_le_tracker/'>Bluetooth LE Tracker</a>
        </li>
        <li>
            <a href='/components/device_tracker.bluetooth_tracker/'>Bluetooth Tracker</a>
        </li>
        <li>
            <a href='/components/device_tracker.cisco_ios/'>Cisco IOS</a>
        </li>
        <li>
            <a href='/components/device_tracker.ddwrt/'>DD-WRT</a>
        </li>
        <li>
            <a href='/components/device_tracker.fritz/'>FRITZ!Box</a>
        </li>
        <li>
            <a href='/components/device_tracker.gpslogger/'>GPSLogger</a>
        </li>
        <li>
            <a href='/components/device_tracker.locative/'>Locative</a>
        </li>
        <li>
            <a href='/components/device_tracker.mqtt/'>MQTT Device Tracker</a>
        </li>
        <li>
            <a href='/components/sensor.mqtt_room/'>MQTT Room Presence</a>
        </li>
        <li>
            <a href='/components/device_tracker.netgear/'>Netgear</a>
        </li>
        <li>
            <a href='/components/device_tracker.nmap_tracker/'>Nmap</a>
        </li>
        <li>
            <a href='/components/device_tracker.luci/'>OpenWRT (luci)</a>
        </li>
        <li>
            <a href='/components/device_tracker.ubus/'>OpenWRT (ubus)</a>
        </li>
        <li>
            <a href='/components/device_tracker.owntracks/'>Owntracks</a>
        </li>
        <li>
            <a href='/components/device_tracker.ping/'>Ping (ICMP)</a>
        </li>
        <li>
            <a href='/components/device_tracker.snmp/'>SNMP</a>
        </li>
        <li>
            <a href='/components/device_tracker.swisscom/'>Swisscom Internet-Box</a>
        </li>
        <li>
            <a href='/components/device_tracker.tplink/'>TP-Link</a>
        </li>
        <li>
            <a href='/components/device_tracker.thomson/'>Thomson</a>
        </li>
        <li>
            <a href='/components/device_tracker.tomato/'>Tomato</a>
        </li>
        <li>
            <a href='/components/device_tracker.trackr/'>TrackR</a>
        </li>
        <li>
            <a href='/components/device_tracker.upc_connect/'>UPC ConnectBox</a>
        </li>
        <li>
            <a href='/components/device_tracker.unifi/'>Ubiquiti Unifi WAP</a>
        </li>
        <li>
            <a href='/components/device_tracker.volvooncall/'>Volvo On Call</a>
        </li>
        <li>
            <a href='/components/device_tracker.xiaomi/'>Xiaomi Router</a>
        </li>
        <li>
            iCloud
        </li>
    </ul>
    </div>
</section>
  
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">
  <a rel="me" href='https://twitter.com/home_assistant'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://facebook.com/homeassistantio'><i class="icon-facebook"></i></a>
  <a rel="me" href='https://plus.google.com/110560654828510104551'><i class="icon-google-plus"></i></a>
  <a rel="me" href='https://github.com/home-assistant/home-assistant'><i class="icon-github"></i></a>

  <div class="credit">
    Contact us at <a href='mailto:hello@home-assistant.io'>hello@home-assistant.io</a>.<br>
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and the <a href='https://github.com/coogie/oscailte'>Oscalite theme</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
</div>
    </div>
  </div>
</div>
    </footer>

    <script>
  var _gaq=[['_setAccount','UA-57927901-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
  </body>
</html>